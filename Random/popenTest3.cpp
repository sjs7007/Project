//working function to get stdout in int form. In next part modify it to take in two files and print o/p of both files for diff arg values.

#include <iomanip>
#include <iostream>
#include <stdio.h> //for popen,fgets
#include <stdlib.h> //for atoi

using namespace std;

const int Max_Buffer = 255;

int getOutput(string commandInput);

int main()
{
	//cout<<"Output : "<<getOutput("./temp10");
	for(int i=0;i<10;i++)
	{
		string cmd1="g++ testProgram1.cpp -o testProgram1 ; ./testProgram1 5";
		string cmd2="g++ testProgram2.cpp -o testProgram2 ; ./testProgram2 10";
		int temp1 = getOutput(cmd1.c_str());
		int temp2 = getOutput(cmd2.c_str());
		
		cout<<temp1<<" "<<temp2<<endl;
	}
}

int getOutput(string commandInput) //run given command and return its stdout converted as int type
{
	string temp;
	int output;
	char buffer[Max_Buffer];
	FILE *stream = popen(commandInput.c_str(),"r");
	while( fgets(buffer,Max_Buffer,stream)!=NULL )
	{
		temp.append(buffer);
	}
	pclose(stream);
	output=atoi(temp.c_str()); //convert string to int
	return output;
}

/*
   c_str() : Returns a pointer to an array that contains a 
   			 null-terminated sequence of characters (i.e., a C-string) r
   			 epresenting the current value of the string object.

   	http://www.cplusplus.com/reference/string/string/c_str/

*/